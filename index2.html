<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Valentine's Day ‚ù§Ô∏è</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –ª–µ—Ç–∞—é—â–∏—Ö —Å–µ—Ä–¥–µ—á–µ–∫ -->
    <div class="hearts-container"></div>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã -->
    <div class="content">
        <h1 class="glowing-text">–õ—é–±–æ–≤—å –≤ –≤–æ–∑–¥—É—Ö–µ! üíñ</h1>

        <!-- –°–ª–∞–π–¥–µ—Ä -->
        <div class="slider-container">
            <div class="slider">
                <div class="slide"><img src="images/photo1.jpg" alt="–§–æ—Ç–æ 1"></div>
                <div class="slide"><img src="images/photo2.jpg" alt="–§–æ—Ç–æ 2"></div>
                <div class="slide"><img src="images/photo3.jpg" alt="–§–æ—Ç–æ 3"></div>
            </div>
            <button class="prev" onclick="prevSlide()">&#10094;</button>
            <button class="next" onclick="nextSlide()">&#10095;</button>
        </div>

        <p class="subtitle">–°–µ–≥–æ–¥–Ω—è 14 —Ñ–µ–≤—Ä–∞–ª—è, –∞ –∑–Ω–∞—á–∏—Ç, –≤—Ä–µ–º—è –¥–ª—è –≤–æ–ª—à–µ–±—Å—Ç–≤–∞!</p>

        <!-- –û—Å–Ω–æ–≤–Ω–∞—è –∫–Ω–æ–ø–∫–∞ -->
        <button id="mainButton" class="glowing-button" onclick="startChallenge()">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button>
    </div>

    <script>
        let clickCount = 0;

        function startChallenge() {
            // –°–∫—Ä—ã–≤–∞–µ–º –≥–ª–∞–≤–Ω—É—é –∫–Ω–æ–ø–∫—É
            document.getElementById("mainButton").style.display = "none";
            spawnHiddenButton();
        }

        function spawnHiddenButton() {
            if (clickCount >= 3) {
                window.location.href = "index3.html"; // –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å–ª–µ–¥—É—é—â—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
                return;
            }

            const content = document.querySelector(".content"); // –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å —Ç–µ–∫—Å—Ç–æ–º –∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏
            const button = document.createElement("button");
            button.classList.add("hidden-button");
            button.textContent = "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å";
            button.style.position = "absolute";
            button.style.width = "150px"; // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —à–∏—Ä–∏–Ω—É –∫–Ω–æ–ø–∫–∏
            button.style.height = "50px"; // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤—ã—Å–æ—Ç—É –∫–Ω–æ–ø–∫–∏
            button.style.zIndex = "999"; // –£–±–µ–¥–∏–º—Å—è, —á—Ç–æ –∫–Ω–æ–ø–∫–∞ –±—É–¥–µ—Ç —Å–≤–µ—Ä—Ö—É

            let left, top;
            let isOverlapping;

            do {
                left = Math.random() * 80 + "vw"; // –°–ª—É—á–∞–π–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è –ø–æ –æ—Å–∏ X
                top = Math.random() * 80 + "vh";  // –°–ª—É—á–∞–π–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è –ø–æ –æ—Å–∏ Y

                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –ø–µ—Ä–µ—Å–µ–∫–∞–µ—Ç—Å—è –ª–∏ –∫–Ω–æ–ø–∫–∞ —Å –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º
                const contentRect = content.getBoundingClientRect(); // –ü–æ–ª—É—á–∞–µ–º —Ä–∞–∑–º–µ—Ä—ã –∏ –ø–æ–∑–∏—Ü–∏—é –∫–æ–Ω—Ç–µ–Ω—Ç–∞
                const buttonRect = button.getBoundingClientRect(); // –ü–æ–ª—É—á–∞–µ–º —Ä–∞–∑–º–µ—Ä—ã –∫–Ω–æ–ø–∫–∏

                isOverlapping = 
                    buttonRect.left < contentRect.right && 
                    buttonRect.right > contentRect.left &&
                    buttonRect.top < contentRect.bottom && 
                    buttonRect.bottom > contentRect.top;
                
            } while (isOverlapping); // –ï—Å–ª–∏ –∫–Ω–æ–ø–∫–∞ –ø–µ—Ä–µ—Å–µ–∫–∞–µ—Ç—Å—è —Å –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º, –ø—Ä–æ–±—É–µ–º —Å–Ω–æ–≤–∞

            button.style.left = left;
            button.style.top = top;

            button.onclick = () => {
                button.remove();
                clickCount++;
                spawnHiddenButton();
            };

            document.body.appendChild(button);
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ª–µ—Ç–∞—é—â–∏—Ö —Å–µ—Ä–¥–µ—á–µ–∫
        function createHeart() {
            const heart = document.createElement("div");
            heart.classList.add("heart");
            heart.style.left = Math.random() * 100 + "vw";
            heart.style.animationDuration = Math.random() * 2 + 3 + "s";
            document.querySelector(".hearts-container").appendChild(heart);
            setTimeout(() => {
                heart.remove();
            }, 5000);
        }
        setInterval(createHeart, 300);

        // –õ–æ–≥–∏–∫–∞ —Å–ª–∞–π–¥–µ—Ä–∞
        let currentIndex = 0;
        const slides = document.querySelectorAll('.slide');
        const slider = document.querySelector('.slider');

        function showSlide(index) {
            if (index >= slides.length) currentIndex = 0;
            else if (index < 0) currentIndex = slides.length - 1;
            else currentIndex = index;
            slider.style.transform = `translateX(-${currentIndex * 100}%)`;
        }

        function nextSlide() {
            showSlide(currentIndex + 1);
        }

        function prevSlide() {
            showSlide(currentIndex - 1);
        }
    </script>
</body>

</html>
